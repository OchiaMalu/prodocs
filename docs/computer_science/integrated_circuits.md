# 计算机科学入门

## 分立元件和数字暴政

在大概50年里，软件从 **纸带打孔** 变成 **面向对象** 编程语言，在集成开发环境中写程序。

但如果没有 **硬件** 的大幅度进步软件是不可能做到这些的，为了体会硬件性能的爆炸性增长我们要回到 **电子计算机** 的诞生年代。

大约 1940 年代~ 1960 年代中期这段时间里计算机都由独立部件组成，叫 `分立元件` （discrete components）然后不同组件再用线连在一起。

> 分立元件是指只有一个电路元件的组件，可以是被动的（电阻、电容、电感），也可以是主动的（晶体管、真空管）。

ENIAC 有 1 万 7 千多个真空管, 7 万个电阻， 1 万个电容器, 7 千个二极管, 5
百万个手工焊点，如果想提升性能，就要加更多部件这导致更多电线，更复杂，这个问题叫 `数字暴政` （Tyranny of Numbers）。

<img src="http://niu.ochiamalu.fun/image-20231019163719228.png" alt="image-20231019163719228" style="zoom:80%;margin:0 auto" />

1950 年代中期，晶体管开始商业化（市场上买得到）开始用在计算机里，晶体管比电子管 更小更快更可靠，但晶体管依然是分立元件。

<img src="http://niu.ochiamalu.fun/image-20231019164141405.png" alt="image-20231019164141405" style="zoom:80%;margin:0 auto" />

1959年，IBM 把 709 计算机从原本的电子管全部换成晶体管，诞生的新机器 IBM 7090 速度快 6 倍，价格只有一半，晶体管标志着 **计算
2.0 时代** 的到来，虽然更快更小但晶体管的出现 还是没有解决 **数字暴政** 的问题，有几十万个独立元件的计算机不但难设计
而且难生产。

1960 年代，这个问题的严重性达到顶点， 电脑内部常常一大堆电线缠绕在一起，看看这个 1965 年 PDP-8 计算机的内部。

<img src="http://niu.ochiamalu.fun/image-20231019164202109.png" alt="image-20231019164202109" style="zoom:80%;margin:0 auto" />

## 集成电路

解决办法是引入一层新 **抽象** ，封装复杂性。

突破性进展在 1958 年当时 Jack Killby 在德州仪器工作，演示了一个电子部件：<u>电路的所有组件都集成在一起</u> 。

简单说就是：与其把多个独立部件用电线连起来，拼装出计算机，我们把多个组件包在一起，变成一个新的独立组件，再用这些组件拼装成计算机，这就是 `集成电路`
（IC）。

几个月后，在1959年 Robert Noyce 的 **仙童半导体** 让集成电路变为现实，Kilby 用锗来做集成电路，锗很稀少而且不稳定，仙童半导体公司用
**硅** ，硅的蕴藏量丰富，占地壳四分之一，也更稳定可靠，所以 Noyce 被公认为现代集成电路之父，开创了电子时代，创造了硅谷（仙童公司所在地），之后有很多半导体企业都出现在硅谷。

起初，一个 IC 只有几个晶体管例如这块早期样品，由西屋公司制造，即使只有几个晶体管也可以把简单电路，能封装成单独组件。

<img src="http://niu.ochiamalu.fun/image-20231019164736713.png" alt="image-20231019164736713" style="zoom:80%;margin:0 auto" />

## PCB

IC 就像电脑工程师的乐高积木可以组合出无数种设计，但最终还是需要连起来，创造更大更复杂的电路，比如整个计算机。

所以工程师们再度创新： **印刷电路板** ，简称 `PCB` 。

<img src="http://niu.ochiamalu.fun/image-20231019164758540.png" alt="image-20231019164758540" style="zoom:80%;margin:0 auto" />

PCB 可以大规模生产，无需焊接或用一大堆线，它通过蚀刻金属线的方式，把零件连接到一起。

把 PCB 和 IC 结合使用可以大幅减少独立组件和电线，但做到相同的功能，而且 **更小，更便宜，更可靠** ！

<img src="http://niu.ochiamalu.fun/image-20231019164828188.png" alt="image-20231019164828188" style="zoom:80%;margin:0 auto" />

## 光刻

许多早期 IC 都是把很小的分立元件封装成一个独立单元，例如这块 1964 年的 IBM 样品。

<img src="http://niu.ochiamalu.fun/image-20231019165001687.png" alt="image-20231019165001687" style="zoom:80%;margin:0 auto" />

不过，即使组件很小塞5个以上的晶体管还是很困难，为了实现更复杂的设计，需要全新的制作工艺  `光刻` （Photolithography）登场！

简单说就是用光把复杂图案印到材料上，比如半导体，它只有几个基础操作，但可以制作出复杂电路。

我们从一片硅开始，叫 `晶圆` 长得像薄饼干一样，硅很特别，它是 **半导体** ，它有时导电，有时不导电我们可以控制导电时机，所以硅是做晶体管的绝佳材料。

我们可以用晶圆做基础把 **复杂金属电路** 放上面，集成所有东西，非常适合做 **集成电路** 。

<img src="http://niu.ochiamalu.fun/image-20231019165522508.png" alt="image-20231019165522508" style="zoom: 50%;margin:0 auto" />

下一步是在硅片顶部加一层薄薄的 **氧化层** ，作为保护层。

<img src="http://niu.ochiamalu.fun/image-20231019165704437.png" alt="image-20231019165704437" style="zoom:80%;margin:0 auto" />

然后加一层特殊化学品, 叫 `光刻胶` ，光刻胶被光照射后，会变得可溶，可以用一种特殊化学药剂洗掉。

<img src="http://niu.ochiamalu.fun/image-20231019165745434.png" alt="image-20231019165745434" style="zoom:80%;margin:0 auto" />

单单光刻胶本身，并不是很有用但和 `光掩膜` 配合使用会很强大，把光掩膜盖到晶圆上，用强光照射 **挡住** 光的地方，光刻胶不会变化。

<img src="http://niu.ochiamalu.fun/image-20231019165841458.png" alt="image-20231019165841458" style="zoom:80%;margin:0 auto" />

光照到的地方，光刻胶会发生化学变化洗掉它之后，暴露出 **氧化层** 。

用另一种化学物质 - 通常是一种酸可以洗掉 **氧化层** 露出的部分, 蚀刻到 **硅** （晶圆）层。

<img src="http://niu.ochiamalu.fun/image-20231019170037060.png" alt="image-20231019170037060" style="zoom:80%;margin:0 auto" />

注意，氧化层被光刻胶保护住了，为了清理光刻胶，我们用另一种化学药品洗掉它。

是的，光刻法用很多化学品，每种都有特定用途。

<img src="http://niu.ochiamalu.fun/image-20231019170155018.png" alt="image-20231019170155018" style="zoom:80%;margin:0 auto" />

现在硅又露出来了，我们想修改硅露出来的区域，让它导电性更好，所以用一种化学过程来改变它，叫 `掺杂` 。

`掺杂` 通常用高温气体来做，比如 **磷** 渗透进暴露出的硅，改变电学性质。

<img src="http://niu.ochiamalu.fun/image-20231019170346241.png" alt="image-20231019170346241" style="zoom:80%;margin:0 auto" />

我们还需要几轮光刻法来做晶体管，过程基本一样，先盖 **氧化层** ，再盖 **光刻胶** 。

<img src="http://niu.ochiamalu.fun/image-20231019170454282.png" alt="image-20231019170454282" style="zoom:80%;margin:0 auto" />

然后用新的光掩膜，这次 **图案不同** 在掺杂区域上方开一个缺口。

<img src="http://niu.ochiamalu.fun/image-20231019170528122.png" alt="image-20231019170528122" style="zoom:80%;margin:0 auto" />

洗掉光刻胶，然后用 **另一种气体** 掺杂 ，把一部分硅转成另一种形式。

为了控制深度，时机很重要我们不想超过之前的区域。

<img src="http://niu.ochiamalu.fun/image-20231019170553557.png" alt="image-20231019170553557" style="zoom:80%;margin:0 auto" />

再次用 **光刻胶** 和 **光掩膜** 蚀刻出小通道，在氧化层上做通道，可以用 **细小金属导线** ，连接不同晶体管。

<img src="http://niu.ochiamalu.fun/image-20231019170753514.png" alt="image-20231019170753514" style="zoom:80%;margin:0 auto" />

现在用新的处理方法 叫 `金属化`  放一层薄薄的 **金属** ，比如铝或铜。

<img src="http://niu.ochiamalu.fun/image-20231019170928910.png" alt="image-20231019170928910" style="zoom:80%;margin:0 auto" />

但我们不想用金属盖住所有东西，我们想蚀刻出 **具体** 的电路。

所以又是类似的步骤，用光刻胶+光掩膜，然后溶掉暴露的光刻胶，暴露的金属。

<img src="http://niu.ochiamalu.fun/image-20231019171032090.png" alt="image-20231019171032090" style="zoom:80%;margin:0 auto" />

晶体管终于做好了！它有 **三根线** ，连接着硅的三个不同区域，每个区域的掺杂方式不同，这叫 `双极型晶体管`（bipolar junction
transistor） 。

<img src="http://niu.ochiamalu.fun/image-20231019171134372.png" alt="image-20231019171134372" style="zoom:80%;margin:0 auto" />

这个 1962 年的真实专利，永远改变了世界，用类似步骤，光刻可以制作其他电子元件比如电阻和电容，都在一片硅上，而且互相连接的电路也做好了。

<img src="http://niu.ochiamalu.fun/image-20231019171328809.png" alt="image-20231019171328809" style="zoom:80%;margin:0 auto" />

之前的例子 只做了一个晶体管，但现实中光刻法一次会做上百万个细节，芯片放大是这样的，导线上下交错，连接各个元件。

<img src="http://niu.ochiamalu.fun/image-20231019171422259.png" alt="image-20231019171422259" style="zoom:80%;margin:0 auto" />

尽管可以把光掩膜投影到一整片晶圆上但光可以投射成 **任意大小** ，就像投影仪可以投满荧幕一样。

我们可以把 **光掩膜** 聚焦到极小的区域，制作出非常精细的细节。

<img src="http://niu.ochiamalu.fun/image-20231019171610799.png" alt="image-20231019171610799" style="zoom: 67%;margin:0 auto" />

一片晶圆可以做很多 IC ，整块都做完后，可以 **切割** 然后包进微型芯片。

微型芯片就是在电子设备中那些小长方体，记住，芯片的核心都是一小片 IC 。

<img src="http://niu.ochiamalu.fun/image-20231019171724722.png" alt="image-20231019171724722" style="zoom:80%;margin:0 auto" />

## 摩尔定律

随着光刻技术发展，晶体管变小，密度变高。

1960 年代初，IC 很少超过 5 个晶体管，因为塞不下，但 1960 年代中期市场上开始出现超过 100 个晶体管的 IC。

1965年，**戈登·摩尔** 看到了趋势：<u>每两年左右，得益于材料和制造技术的发展，同样大小的空间，能塞进两倍数量的晶体管</u>
，这叫 `摩尔定律` 。

芯片的价格也急剧下降， 1962 年平均 50 美元，下降到 1968 年 2 美元左右，如今几美分就能买到 IC 。

晶体管更小密度更高 还有其他好处，晶体管越小，要移动的 **电荷量** 就越少能更快切换状态，耗电更少。电路更紧凑还意味着信号延迟更低导致
**时钟速度** 更快。

1968年，罗伯特·诺伊斯 和 戈登·摩尔联手成立了一家新公司，结合 Intergrated (集成) 和 Electronics (电子)
两个词，取名 `Intel` ， 如今最大的芯片制造商。

Intel 4004 CPU 是个重要里程碑，发布于 1971 年是第一个用 IC 做的处理器，也叫微型处理器，它有 2300 个晶体管，人们惊叹于它的整合水平整个
CPU 在一个芯片里，而仅仅 20 年前，用分立元件会占满整个屋子。

<img src="http://niu.ochiamalu.fun/image-20231007152452845.png" alt="image-20231007152452845" style="zoom:80%;margin:0 auto" />

计算机正式进入 **集成电路时代** 。

而 Intel 4004 只是个开始，CPU 晶体管数量爆发增长。

1980年，3 万晶体管。

1990年，100 万晶体管。

2000年，3000 万个晶体管。

2010年，10亿个晶体管！

为了达到这种密度，光刻的分辨率从大约一万纳米，大概是人类头发直径的 1/10 ，发展到如今的 14 纳米，比血红细胞小 400 倍！

当然，CPU 不是唯一受益的元件，大多数电子器件都在指数式发展：<u>内存，显卡，固态硬盘，摄像头感光元件</u> 等等。

如今的处理器，比如 iPhone 15 的 A16 处理器有 160 亿个晶体管。

### EDA 技术

现代工程师设计电路时，当然不是手工一个个设计晶体管，这不是人力能做到的。

1970年代开始，超大规模集成 (VLSI) 软件用来 **自动生成** 芯片设计，用比如 `逻辑综合`
这种技术可以放一整个高级组件，比如内存缓存，软件会自动生成电路，做到尽可能高效，许多人认为这是计算 4.0 的开始。

EDA 是电子设计自动化（Electronic Design
Automation）的缩写，在20世纪90年代初从计算机辅助设计（CAD）、计算机辅助制造（CAM）、计算机辅助测试（CAT）和计算机辅助工程（CAE）的概念发展而来的。

<img src="http://niu.ochiamalu.fun/image-20231019173748015.png" alt="image-20231019173748015" style="zoom:50%;margin:0 auto" />

EDA 技术就是以计算机为工具，设计者在 EDA 软件平台上，用硬件描述语言 HDL 完成设计文件，然后由计算机 **自动**
地完成逻辑编译、化简、分割、综合、优化、布局、布线和仿真，直至对于特定目标芯片的适配编译、逻辑映射和编程下载等工作。

EDA技术的出现，极大地提高了电路设计的效率和可行性，减轻了设计者的劳动强度。

## 瓶颈

坏消息是，专家们几十年来一直在预言摩尔定律的终结，现在可能终于接近了。

进一步做小，会面临 2 个大问题。

1. 用光掩膜把图案弄到晶圆上，因为光的波长， **精度** 已达极限，所以科学家在研制波长更短的光源，投射更小的形状。
2. 当晶体管非常小，电极之间可能只距离几个原子电子会 **跳过间隙** ，这叫：`量子隧穿效应` ，如果晶体管漏电，就不是好开关。

科学家和工程师在努力找解决方法，实验室中已造出小至 1 纳米的晶体管，能不能商业量产依然未知，未来也许能解决。
